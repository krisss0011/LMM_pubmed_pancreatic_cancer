The aryl hydrocarbon receptor (AhR) is a sensor of products of tryptophan metabolism and a potent modulator of immunity. Here, we examined the impact of AhR in tumor-associated macrophage (TAM) function in pancreatic ductal adenocarcinoma (PDAC). TAMs exhibited high AhR activity and Ahr-deficient macrophages developed an inflammatory phenotype. Deletion of Ahr in myeloid cells or pharmacologic inhibition of AhR reduced PDAC growth, improved efficacy of immune checkpoint blockade, and increased intra-tumoral frequencies of IFNγ+CD8+T cells. Macrophage tryptophan metabolism was not required for this effect. Rather, macrophage AhR activity was dependent on Lactobacillus metabolization of dietary tryptophan to indoles. Removal of dietary tryptophan reduced TAM AhR activity and promoted intra-tumoral accumulation of TNFα+IFNγ+CD8+T cells; provision of dietary indoles blocked this effect. In patients with PDAC, high AHR expression associated with rapid disease progression and mortality, as well as with an immune-suppressive TAM phenotype, suggesting conservation of this regulatory axis in human disease.